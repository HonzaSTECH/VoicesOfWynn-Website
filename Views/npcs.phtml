<?php foreach (${basename(__FILE__, '.phtml').'_quests'} as $quest) : ?>
<section data-quest-id="<?= $quest->getId() ?>">
	<h3 style="text-align: center;"><?= $quest->getName() ?></h3>
	<table class="table-npc-management">
		<tr>
			<th>Rearrange</th><th colspan="2">NPC</th><th colspan="2">Voice actor</th><th></th>
		</tr>
	<?php foreach ($quest->getNpcs() as $npc) : ?>
		<tr data-npc-id="<?= $npc->getId() ?>">
            <td>
                <button class="rearrange-up-btn">ðŸ”¼</button>
                <br>
                <button class="rearrange-down-btn">ðŸ”½</button>
            </td>
			<td style="min-width: 150px; max-width: 150px;"><img src="dynamic/npcs/<?= $npc->getId() ?>.png" alt="NPC picture" class="avatar" /></td>
			<td style="min-width: 150px; max-width: 150px;"><a href="contents/npc/<?= $npc->getId() ?>"><?= $npc->getName() ?></a></td>
			<?php if ($npc->getVoiceActor() === null) : ?>
                <td style="min-width: 150px; max-width: 150px;"><img class="avatar" src="dynamic/avatars/nobody.png" alt="Profile picture"/></td>
				<td style="min-width: 150px; max-width: 150px;"><i>Nobody</i></td>
			<?php else : ?>
                <td style="min-width: 150px; max-width: 150px;"><img class="avatar" src="dynamic/avatars/<?= $npc->getVoiceActor()->getAvatarLink() ?>" alt="Profile picture"/></td>
				<td style="min-width: 150px; max-width: 150px;"><a href="cast/<?= $npc->getVoiceActor()->getId() ?>"><?= $npc->getVoiceActor()->getName() ?></a></td>
			<?php endif ?>
			<td><a id="managelink" href="administration/npcs/manage/<?= $npc->getId() ?>" style="min-width: 150px; max-width: 150px;">Manage</a></td>
		</tr>
	<?php endforeach ?>
	</table><hr>
</section>
<?php endforeach ?>