<?php $voiceActor = ${basename(__FILE__, '.phtml').'_voice_actor'}; ?>
<h1>~ <?= $voiceActor->getName(); ?> ~</h1>
<br>
<div class="avatar0">
<p>

</p>
</div>
<div class="bio">
<section>

<?php if (!empty($voiceActor->getEmail()) && $voiceActor->hasPublicEmail()) : ?>
    <code>
    <a class="contact" href="mailto:<?= $voiceActor->getEmail() ?>">
        <button class="contactbtn">
            <img id="contributerimg" src="dynamic/avatars/<?= $voiceActor->getAvatarLink() ?>" 
                 alt="Voice actor's avatar" 
                 style="max-width: 10vh; 
                        max-height: 10vh;">
        </button>
    </a>
    </code>
<?php else : ?>
<code>
    <img id="contributerimg" src="dynamic/avatars/<?= $voiceActor->getAvatarLink() ?>" 
             alt="Voice actor's avatar" 
             style="max-width: 10vh; 
                    max-height: 10vh;">
</code>
<?php endif ?>

<article class="bio0"><?= $voiceActor->getBio(); ?></article>
</section>
</div>

<?php if (count(${basename(__FILE__, '.phtml').'_quest_recordings'}) === 0) : ?>
<i style="color: rgb(255, 83, 83);">This contributor didn't submit any recordings.</i>
<?php else : ?>
<h3>Recordings</h3>
<?php endif ?>
<?php foreach (${basename(__FILE__, '.phtml').'_quest_recordings'} as $quest) : ?>
    <section>
        <table>
            <tr>
                <th colspan="2">
                    <b><?= $quest->getNpcs()[0]->getName() ?></b> in <i><?= $quest->getName() ?></i></th>
                <th>üëç</th>
                <th>üëé</th>
                <th>üí¨</th>
            </tr>
			<?php $recordings = $quest->getNpcs()[0]->getRecordings(); ?>
			<?php foreach ($recordings as $recording) : ?>
                <tr>
                    <td># <?= $recording->line ?></td>
                    <td>
                        <audio controls>
                            <source src="dynamic/recordings/<?= $recording->file ?>" type="audio/ogg">
                            Oops! Your browser doesnt support the OGG format :(
                        </audio>
                    <td><a<?php if (!isset($_COOKIE['votedFor'.$recording->id])) : ?> class="upvote"<?php endif ?> data-recording-id="<?= $recording->id ?>" data-npc-id="<?= $recording->npcId ?>"><?= $recording->upvotes ?></a></td>
                    <td><a<?php if (!isset($_COOKIE['votedFor'.$recording->id])) : ?> class="downvote"<?php endif ?> data-recording-id="<?= $recording->id ?>" data-npc-id="<?= $recording->npcId ?>"><?= $recording->downvotes ?></a></td>
                    <td>
                        <a href="contents/npc/<?= $recording->npcId ?>/comments/<?= $recording->id ?>" class="comment"><?= $recording->comments ?></a>
                    </td>
                </tr>
			<?php endforeach ?>
        </table>
    </section>
<?php endforeach ?>
<br>
<a href="/credits"><button class="backbtn">< Go Back</button></a>